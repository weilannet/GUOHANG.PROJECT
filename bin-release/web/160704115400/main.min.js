var ChangeSceneEvent=function(t){function e(e,i,h){void 0===i&&(i=!1),void 0===h&&(h=!1),t.call(this,e,i,h)}__extends(e,t);var i=(__define,e);i.prototype;return e.CHANGE_SCENE_EVENT="changesceneevent",e}(egret.Event);egret.registerClass(ChangeSceneEvent,"ChangeSceneEvent");var Demo=function(t){function e(){t.call(this),this.spList=[],this.mouseX_old=0,this.picWidth=300,this.picHeight=400,this.isMove=!1,this.sp_center_x=0,this.sp_center_y=0,this.width=640,this.height=960,this.touchChildren=!1,this.touchEnabled=!0}__extends(e,t);var i=(__define,e),h=i.prototype;return h.init=function(){this.sp_center_x=.5*this.width-.5*this.picWidth+50,this.sp_center_y=.5*this.height-.5*this.picHeight,this.initSp(),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.beginHandler,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.endHandler,this)},h.beginHandler=function(t){this.mouseX_old=t.localX},h.endHandler=function(t){if(!this.isMove){var e=this;this.isMove=!0;var i=this.spList.length,h=t.localX-this.mouseX_old<0;h?this.spList.push(this.spList.shift()):this.spList.unshift(this.spList.pop());for(var s=0;i>s;s++){var n=new moveVo(s,this.picWidth),o=this.spList[s];this.addChildAt(o,n.childIdx),egret.Tween.get(o).to({x:e.sp_center_x+n.x,scaleX:n.scale,scaleY:n.scale},200)}h||this.addChildAt(this.spList[0],0),egret.Tween.get(this).to({},200).call(function(){e.isMove=!1},this)}},h.initSp=function(){for(var t=[15856459,4868847,15682270,4910938,15682122],e=0;5>e;e++){var i=new egret.Sprite;i.graphics.beginFill(t[e]),i.graphics.drawRect(0,0,this.picWidth,this.picHeight),i.graphics.endFill(),i.anchorOffsetX=.5*this.picWidth,i.anchorOffsetY=.5*this.picHeight,this.spList.push(i);var h=new egret.TextField;h.text=e+"",i.addChild(h);var s=new moveVo(e,this.picWidth);i.x=this.sp_center_x+s.x,i.y=this.sp_center_y,i.scaleX=i.scaleY=s.scale,this.addChildAt(i,s.childIdx)}},h.dispose=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.beginHandler,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.endHandler,this)},e}(egret.Sprite);egret.registerClass(Demo,"Demo");var moveVo=function(){function t(t,e){this.x=0,this.scale=1,this.childIdx=0;var i=t-2,h=Math.abs(i);this.x=.3*e*i,this.scale=1-.2*h,this.childIdx=2-h}var e=(__define,t);e.prototype;return t}();egret.registerClass(moveVo,"moveVo");var LoadingUI=function(t){function e(){t.call(this),this.createView()}__extends(e,t);var i=(__define,e),h=i.prototype;return h.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},h.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(t){function e(){t.call(this),this.sprcon=new egret.Sprite,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),h=i.prototype;return h.onAddToStage=function(t){this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},h.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},h.onResourceLoadComplete=function(t){"preload"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},h.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},h.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},h.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},h.createGameScene=function(){var t=this.stage.stageWidth,e=this.stage.stageHeight,i=ViewManager.getInstance();this.addChild(i),i.width=t,i.height=e,i.start()},h.onChange=function(){console.log("onChange")},h.onComplete=function(t,e){console.log("onComplete"),console.log(t),console.log(e)},h.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},h.startAnimation=function(t){for(var e=this,i=new egret.HtmlTextParser,h=[],s=0;s<t.length;s++)h.push(i.parser(t[s]));var n=e.textfield,o=-1,r=function(){o++,o>=h.length&&(o=0);var t=h[o];e.changeDescription(n,t);var i=egret.Tween.get(n);i.to({alpha:1},200),i.wait(2e3),i.to({alpha:0},200),i.call(r,e)};r()},h.changeDescription=function(t,e){t.textFlow=e},e}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var TripCardPanel=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e),h=i.prototype;return h.start=function(){this.init(),this.send_Sprite.touchEnabled=!0,this.send_Sprite.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTab,this),this.follow_Sprite.touchEnabled=!0,this.follow_Sprite.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchFollowTab,this),this.xz_csPic.touchEnabled=!0,this.xz_csPic.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchContentTab,this)},h.init=function(){if(!this.card_Sprite){this.stageW=this.width,this.stageH=this.height,this.card_Sprite=new egret.Sprite,this.card_Sprite.graphics.drawRect(0,0,this.stageW,this.stageH),this.card_Sprite.graphics.endFill(),this.addChild(this.card_Sprite);var t=new egret.Shape;t.graphics.beginFill(0,.85),t.graphics.drawRect(0,0,this.stageW,this.stageH),t.graphics.endFill(),t.width=this.stageW,t.height=this.stageH,this.card_Sprite.addChild(t),this.content_Sprite=new egret.Sprite,this.content_Sprite.graphics.drawRect(0,0,.98*this.stageW,.4*this.stageH),this.content_Sprite.x=.5*(this.stageW-this.content_Sprite.width),this.content_Sprite.y=.5*(this.stageH-this.content_Sprite.height),this.content_Sprite.graphics.endFill(),this.addChild(this.content_Sprite),this.xz_csPic=new egret.Bitmap(RES.getRes("mojie_cs_1_jpg")),this.xz_csPic.width=this.content_Sprite.width,this.xz_csPic.height=this.content_Sprite.height,this.content_Sprite.addChild(this.xz_csPic),this.cardBG=new egret.Bitmap(RES.getRes("card_bg_png")),this.cardBG.width=this.content_Sprite.width,this.cardBG.height=this.content_Sprite.height,this.xz_csFont=new egret.Bitmap(RES.getRes("mojie_des_3_png")),this.xz_csFont.width=this.content_Sprite.width,this.xz_csFont.height=this.content_Sprite.height,this.xz_csFont.anchorOffsetX=.5*this.xz_csFont.width,this.xz_csFont.anchorOffsetY=.5*this.xz_csFont.height,this.xz_csFont.x=.5*this.xz_csFont.width*.5+20,this.xz_csFont.y=.6*this.xz_csFont.height*.5+20,this.xz_csFont.scaleX=.5,this.xz_csFont.scaleY=.6,this.lineShap=new egret.Shape,this.lineShap.graphics.lineStyle(2,16777215),this.lineShap.graphics.moveTo(.5*this.content_Sprite.width,this.content_Sprite.height-5),this.lineShap.graphics.lineTo(.5*this.content_Sprite.width,.4*this.content_Sprite.height),this.lineShap.graphics.endFill(),this.xz_youPiao=new egret.Bitmap(RES.getRes("mojie_youpiao_png")),this.xz_youPiao.width=this.content_Sprite.width,this.xz_youPiao.height=this.content_Sprite.height,this.xz_youPiao.anchorOffsetX=.5*this.xz_youPiao.width,this.xz_youPiao.anchorOffsetY=.5*this.xz_youPiao.height,this.xz_youPiao.x=this.content_Sprite.width-.3*this.xz_youPiao.width*.5-20,this.xz_youPiao.y=.3*this.xz_youPiao.height*.5+20,this.xz_youPiao.scaleX=this.xz_youPiao.scaleY=.3,this.cardChuo=new egret.Bitmap(RES.getRes("card_chuo_png")),this.cardChuo.width=this.content_Sprite.width,this.cardChuo.height=this.content_Sprite.height,this.cardChuo.anchorOffsetX=.5*this.cardChuo.width,this.cardChuo.anchorOffsetY=.5*this.cardChuo.height,this.cardChuo.x=this.xz_youPiao.x-.4*this.cardChuo.width*.5,this.cardChuo.y=.3*this.xz_youPiao.height,this.cardChuo.scaleX=.4,this.cardChuo.scaleY=.25,this.text_Sprite=new egret.Sprite,this.text_Sprite.graphics.drawRect(0,0,.5*this.content_Sprite.width,.5*this.content_Sprite.height),this.text_Sprite.x=.5*this.content_Sprite.width,this.text_Sprite.y=.5*this.content_Sprite.height,this.text_Sprite.graphics.endFill();var e=40,i=.95*this.text_Sprite.width,h=new egret.TextField;h.width=70,h.height=e,h.size=20,h.x=10,h.y=10,h.text="FROM",h.textColor=16777215,h.textAlign=egret.HorizontalAlign.LEFT,h.verticalAlign=egret.VerticalAlign.MIDDLE,this.text_Sprite.addChild(h),this.textName=new egret.TextField,this.textName.size=20,this.textName.type=egret.TextFieldType.INPUT,this.textName.width=i-80,this.textName.height=e,this.textName.x=70,this.textName.y=10,this.textName.textColor=16777215,this.textName.textAlign=egret.HorizontalAlign.LEFT,this.textName.verticalAlign=egret.VerticalAlign.MIDDLE,this.text_Sprite.addChild(this.textName);var s=new egret.Shape;s.graphics.lineStyle(2,16777215),s.graphics.moveTo(10,e+this.textName.y),s.graphics.lineTo(i,e+this.textName.y),s.graphics.endFill(),this.text_Sprite.addChild(s);var n=new egret.TextField;n.width=40,n.height=e,n.size=20,n.x=10,n.y=e+this.textName.y+2,n.text="TO",n.textColor=16777215,n.textAlign=egret.HorizontalAlign.LEFT,n.verticalAlign=egret.VerticalAlign.MIDDLE,this.text_Sprite.addChild(n),this.textContent=new egret.TextField,this.textContent.size=20,this.textContent.type=egret.TextFieldType.INPUT,this.textContent.width=i-50,this.textContent.height=e,this.textContent.x=40,this.textContent.y=e+this.textName.y+2,this.textContent.textColor=16777215,this.textContent.textAlign=egret.HorizontalAlign.LEFT,this.textContent.verticalAlign=egret.VerticalAlign.MIDDLE,this.text_Sprite.addChild(this.textContent);var o=new egret.Shape;o.graphics.lineStyle(2,16777215),o.graphics.moveTo(10,e+this.textContent.y),o.graphics.lineTo(i,e+this.textContent.y),o.graphics.endFill(),this.text_Sprite.addChild(o);var r=new Date,a=new egret.TextField;a.width=.95*i,a.height=e,a.size=20,a.x=10,a.y=e+this.textContent.y+2,a.text=r.toLocaleDateString(),a.textColor=16777215,a.textAlign=egret.HorizontalAlign.RIGHT,a.verticalAlign=egret.VerticalAlign.MIDDLE,this.text_Sprite.addChild(a);var d=new egret.Shape;d.graphics.lineStyle(2,16777215),d.graphics.moveTo(10,e+a.y),d.graphics.lineTo(i,e+a.y),d.graphics.endFill(),this.text_Sprite.addChild(d),this.initBG()}},h.onTouchTab=function(t){console.log("送好友明信片")},h.onTouchFollowTab=function(t){},h.onTouchContentTab=function(t){this.xz_csPic.touchEnabled=!1,this.xz_csPic.hasEventListener(egret.TouchEvent.TOUCH_TAP)&&this.xz_csPic.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTab,this),this.content_Sprite.removeChild(this.xz_csPic),this.card_Sprite.removeChild(this.cardInfo),this.card_Sprite.addChild(this.cardSend),this.content_Sprite.addChild(this.cardBG),this.content_Sprite.addChild(this.xz_csFont),this.content_Sprite.addChild(this.lineShap),this.content_Sprite.addChild(this.xz_youPiao),this.content_Sprite.addChild(this.cardChuo),this.content_Sprite.addChild(this.text_Sprite),this.addChild(this.follow_Sprite),this.addChild(this.send_Sprite)},h.initBG=function(){this.xz_peoplePic=new egret.Bitmap(RES.getRes("mojie_people_png")),this.xz_peoplePic.anchorOffsetX=.5*this.xz_peoplePic.width,this.xz_peoplePic.anchorOffsetY=.5*this.xz_peoplePic.height,this.xz_peoplePic.scaleX=this.xz_peoplePic.scaleY=.6,this.card_Sprite.addChild(this.xz_peoplePic),this.xz_peoplePic.x=this.card_Sprite.width-.6*this.xz_peoplePic.width,this.xz_peoplePic.y=.6*this.xz_peoplePic.height*.5,this.cardInfo=new egret.Bitmap(RES.getRes("card_info_png")),this.cardInfo.anchorOffsetX=.5*this.cardInfo.width,this.cardInfo.anchorOffsetY=.5*this.cardInfo.height,this.cardInfo.scaleX=this.cardInfo.scaleY=1,this.card_Sprite.addChild(this.cardInfo),this.cardInfo.x=this.xz_peoplePic.x-this.cardInfo.width,this.cardInfo.y=this.xz_peoplePic.y,this.cardSend=new egret.Bitmap(RES.getRes("card_send_png")),this.cardSend.anchorOffsetX=.5*this.cardSend.width,this.cardSend.anchorOffsetY=.5*this.cardSend.height,this.cardSend.scaleX=this.cardSend.scaleY=1,this.cardSend.x=this.xz_peoplePic.x-this.cardSend.width,this.cardSend.y=this.xz_peoplePic.y,this.follow_Sprite=new egret.Sprite,this.follow_Sprite.graphics.drawRect(0,0,.5*this.stageW,70),this.follow_Sprite.x=.5*(this.stageW-this.follow_Sprite.width),this.follow_Sprite.y=this.stageH-140,this.follow_Sprite.graphics.endFill(),this.btnBG=new egret.Bitmap(RES.getRes("card_btn_png")),this.btnBG.width=this.follow_Sprite.width,this.btnBG.height=this.follow_Sprite.height;var t=new egret.Rectangle(40,40,this.btnBG.width-80,this.btnBG.height-80);this.btnBG.scale9Grid=t,this.follow_Sprite.addChild(this.btnBG),this.followFont=new egret.TextField,this.followFont.text="关注我们",this.followFont.textColor=4170190,this.followFont.textAlign=egret.HorizontalAlign.CENTER,this.followFont.verticalAlign=egret.VerticalAlign.MIDDLE,this.follow_Sprite.addChild(this.followFont),this.followFont.x=.5*(this.follow_Sprite.width-this.followFont.width),this.followFont.y=.5*(this.follow_Sprite.height-this.followFont.height),this.send_Sprite=new egret.Sprite,this.send_Sprite.graphics.drawRect(0,0,.5*this.stageW,70),this.send_Sprite.x=.5*(this.stageW-this.send_Sprite.width),this.send_Sprite.y=this.stageH-220,this.send_Sprite.graphics.endFill(),this.btnBG=new egret.Bitmap(RES.getRes("card_btn_png")),this.btnBG.width=this.send_Sprite.width,this.btnBG.height=this.send_Sprite.height;var t=new egret.Rectangle(40,40,this.btnBG.width-80,this.btnBG.height-80);this.btnBG.scale9Grid=t,this.send_Sprite.addChild(this.btnBG),this.sendFont=new egret.TextField,this.sendFont.text="送好友明信片",this.sendFont.textColor=4170190,this.sendFont.textAlign=egret.HorizontalAlign.CENTER,this.sendFont.verticalAlign=egret.VerticalAlign.MIDDLE,this.send_Sprite.addChild(this.sendFont),this.sendFont.x=.5*(this.send_Sprite.width-this.sendFont.width),this.sendFont.y=.5*(this.send_Sprite.height-this.sendFont.height)},h.end=function(){this.send_Sprite.touchEnabled=!1,this.send_Sprite.hasEventListener(egret.TouchEvent.TOUCH_TAP)&&this.send_Sprite.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTab,this),this.follow_Sprite.touchEnabled=!1,this.follow_Sprite.hasEventListener(egret.TouchEvent.TOUCH_TAP)&&this.follow_Sprite.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTab,this)},e.TRIP_CARD="TRIP_CARD",e}(egret.Sprite);egret.registerClass(TripCardPanel,"TripCardPanel");var TripIndexPanel=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e),h=i.prototype;return h.start=function(){this.init(),this.indexSound=RES.getRes("music_mp3"),this.indexGo.touchEnabled=!0,this.indexGo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTab,this)},h.init=function(){if(!this.bg){var t=this.width,e=this.height;this.isPlay=!0,this.bg=new egret.Bitmap(RES.getRes("index_bg_jpg")),this.bg.width=t,this.bg.height=e,this.addChild(this.bg),this.indexGo=new egret.Bitmap(RES.getRes("index_go_png")),this.indexGo.x=.5*(t-this.indexGo.width),this.indexGo.y=.5*(e-this.indexGo.height)-30,this.addChild(this.indexGo),this.indexEarth=new egret.Bitmap(RES.getRes("index_earth_png")),this.indexEarth.x=50,this.indexEarth.y=e,this.indexEarth.anchorOffsetX=.5*this.indexEarth.width,this.indexEarth.anchorOffsetY=.5*this.indexEarth.height,this.addChild(this.indexEarth),egret.Tween.get(this.indexEarth,{loop:!0}).to({rotation:360},10800),this.indexLogo=new egret.Bitmap(RES.getRes("index_logo_png")),this.indexLogo.x=.5*(t-this.indexLogo.width),this.indexLogo.y=e-1.5*this.indexLogo.height,this.addChild(this.indexLogo),this.indexMusic=new egret.Bitmap(RES.getRes("index_music_png")),this.indexMusic.x=t-this.indexMusic.width-30,this.indexMusic.y=20,this.addChild(this.indexMusic);var i=egret.Tween.get(this.indexMusic,{loop:!0});i.to({scaleX:1.2,scaleY:1.2},500).wait(100).to({scaleX:1,scaleY:1},500).wait(100),this.indexMusic.touchEnabled=!0,this.indexMusic.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchMusic,this)}},h.onTouchMusic=function(t){this.isPlay?egret.Tween.pauseTweens(this.indexMusic):(egret.Tween.resumeTweens(this.indexMusic),this.indexSound.play(0,-1)),this.isPlay=!this.isPlay},h.onTouchTab=function(t){ViewManager.getInstance().order(e.TRIP_INDEX,this)},h.end=function(){this.indexGo.touchEnabled=!1,this.indexGo.hasEventListener(egret.TouchEvent.TOUCH_TAP)&&this.indexGo.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTab,this)},e.TRIP_INDEX="TRIP_INDEX",e}(egret.Sprite);egret.registerClass(TripIndexPanel,"TripIndexPanel");var TripPeoplePanel=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e),h=i.prototype;return h.start=function(){this.init(),this.bagBtn.touchEnabled=!0,this.bagBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTab,this),this.daoju1.touchEnabled=!0,this.daoju1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDaojuTouch,this),this.daoju2.touchEnabled=!0,this.daoju2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDaojuTouch,this),this.daoju3.touchEnabled=!0,this.daoju3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDaojuTouch,this),this.daoju4.touchEnabled=!0,this.daoju4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDaojuTouch,this),this.daoju5.touchEnabled=!0,this.daoju5.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDaojuTouch,this),this.daoju6.touchEnabled=!0,this.daoju6.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDaojuTouch,this),this.bagBtn&&egret.Tween.resumeTweens(this.bagBtn)},h.init=function(){this.xz_Sprite||(this.stageW=this.width,this.stageH=this.height,this.xz_Sprite=new egret.Sprite,this.xz_Sprite.graphics.drawRect(0,0,.8*this.stageW,.8*this.stageH),this.xz_Sprite.graphics.endFill(),this.xz_Sprite.x=.5*(this.stageW-this.xz_Sprite.width),this.xz_Sprite.y=.5*(this.stageH-this.xz_Sprite.height),this.addChild(this.xz_Sprite),this.showCard=new egret.Bitmap(RES.getRes("select_card_png")),this.showCard.width=this.xz_Sprite.width,this.showCard.height=this.xz_Sprite.height,this.xz_Sprite.addChild(this.showCard),this.xz_peoplePic=new egret.Bitmap(RES.getRes("mojie_people_png")),this.xz_peoplePic.x=.5*(this.xz_Sprite.width-this.xz_peoplePic.width)+.5*this.xz_peoplePic.width,this.xz_peoplePic.y=.5*this.xz_Sprite.height+100,this.xz_peoplePic.anchorOffsetX=.5*this.xz_peoplePic.width,this.xz_peoplePic.anchorOffsetY=.5*this.xz_peoplePic.height,this.xz_peoplePic.scaleX=this.xz_peoplePic.scaleY=.9,this.xz_Sprite.addChild(this.xz_peoplePic),this.bagBtn=new egret.Bitmap(RES.getRes("mojie_bag_png")),this.bagBtn.x=.5*(this.xz_Sprite.width-this.bagBtn.width)+.5*this.bagBtn.width,this.bagBtn.y=30+.5*this.bagBtn.height,this.bagBtn.anchorOffsetX=.5*this.bagBtn.width,this.bagBtn.anchorOffsetY=.5*this.bagBtn.height,this.bagBtn.scaleX=this.bagBtn.scaleY=.5,egret.Tween.get(this.bagBtn,{loop:!0}).to({rotation:360},10800),this.xz_Sprite.addChild(this.bagBtn),this.xz_des=new egret.Bitmap(RES.getRes("select_des_png")),this.xz_des.x=.5*(this.xz_Sprite.width-this.xz_des.width)+.5*this.xz_des.width,this.xz_des.y=this.xz_peoplePic.y+.1*this.xz_peoplePic.height+.5*this.xz_des.height,this.xz_des.anchorOffsetX=.5*this.xz_des.width,this.xz_des.anchorOffsetY=.5*this.xz_des.height,this.xz_des.scaleX=.8,this.xz_Sprite.addChild(this.xz_des),this.xz_think=new egret.Bitmap(RES.getRes("select_think_png")),this.xz_think.x=.5*this.xz_Sprite.width,this.xz_think.y=.16*this.xz_Sprite.height,this.xz_Sprite.addChild(this.xz_think),this.showBag())},h.showBag=function(){this.daoju_Sprite=new egret.Sprite,this.daoju_Sprite.graphics.drawRect(0,0,this.stageW,this.stageH),this.daoju_Sprite.graphics.endFill();var t=new egret.Shape;t.graphics.beginFill(0,.8),t.graphics.drawRect(0,0,this.stageW,this.stageH),t.graphics.endFill(),t.width=this.stageW,t.height=this.stageH,this.daoju_Sprite.addChild(t),this.daojuCenter=new egret.Bitmap(RES.getRes("mojie_bag_png")),this.daojuCenter.x=.5*(this.daoju_Sprite.width-this.daojuCenter.width)+.5*this.daojuCenter.width,this.daojuCenter.y=.5*(this.daoju_Sprite.height-this.daojuCenter.height),this.daojuCenter.anchorOffsetX=.5*this.daojuCenter.width,this.daojuCenter.anchorOffsetY=.5*this.daojuCenter.height,this.daojuCenter.scaleX=this.daojuCenter.scaleY=.7,this.daoju_Sprite.addChild(this.daojuCenter),egret.Tween.get(this.daojuCenter,{loop:!0}).to({rotation:360},10800);var e=100;this.daoju1=new egret.Bitmap(RES.getRes("mojie_s1_png")),this.daoju1.x=this.daojuCenter.x,this.daoju1.y=this.daojuCenter.y-e,this.daoju1.anchorOffsetX=this.daoju1.anchorOffsetY=.5*this.daoju1.width,this.daoju1.scaleX=this.daoju1.scaleY=.8,this.daoju_Sprite.addChild(this.daoju1),this.daoju1.touchEnabled=!0,this.daoju1.name=this.getRandomNum(),this.daoju2=new egret.Bitmap(RES.getRes("mojie_s2_png")),this.daoju2.x=this.daojuCenter.x,this.daoju2.y=this.daojuCenter.y+e,this.daoju2.anchorOffsetX=this.daoju2.anchorOffsetY=.5*this.daoju2.width,this.daoju2.scaleX=this.daoju2.scaleY=.8,this.daoju_Sprite.addChild(this.daoju2),this.daoju2.name=this.getRandomNum(),this.daoju3=new egret.Bitmap(RES.getRes("mojie_s3_png")),this.daoju3.x=this.daojuCenter.x-100,this.daoju3.y=this.daojuCenter.y-50,this.daoju3.anchorOffsetX=this.daoju3.anchorOffsetY=.5*this.daoju3.width,this.daoju3.scaleX=this.daoju3.scaleY=.8,this.daoju_Sprite.addChild(this.daoju3),this.daoju3.name=this.getRandomNum(),this.daoju4=new egret.Bitmap(RES.getRes("mojie_s4_png")),this.daoju4.x=this.daojuCenter.x-100,this.daoju4.y=this.daojuCenter.y+50,this.daoju4.anchorOffsetX=this.daoju4.anchorOffsetY=.5*this.daoju4.width,this.daoju4.scaleX=this.daoju4.scaleY=.8,this.daoju_Sprite.addChild(this.daoju4),this.daoju4.name=this.getRandomNum(),this.daoju5=new egret.Bitmap(RES.getRes("mojie_s5_png")),this.daoju5.x=this.daojuCenter.x+100,this.daoju5.y=this.daojuCenter.y-50,this.daoju5.anchorOffsetX=this.daoju5.anchorOffsetY=.5*this.daoju5.width,this.daoju5.scaleX=this.daoju5.scaleY=.8,this.daoju_Sprite.addChild(this.daoju5),this.daoju5.name=this.getRandomNum(),this.daoju6=new egret.Bitmap(RES.getRes("mojie_s6_png")),this.daoju6.x=this.daojuCenter.x+100,this.daoju6.y=this.daojuCenter.y+50,this.daoju6.anchorOffsetX=this.daoju6.anchorOffsetY=.5*this.daoju6.width,this.daoju6.scaleX=this.daoju6.scaleY=.8,this.daoju_Sprite.addChild(this.daoju6),this.daoju6.name=this.getRandomNum()},h.onTouchTab=function(t){egret.Tween.pauseTweens(this.bagBtn),this.bagBtn.touchEnabled=!1,this.bagBtn.hasEventListener(egret.TouchEvent.TOUCH_TAP)&&this.bagBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTab,this),this.addChild(this.daoju_Sprite)},h.onDaojuTouch=function(t){console.log(t.target.name),this.removeChild(this.daoju_Sprite),ViewManager.getInstance().order(e.TRIP_PEOPLE,this)},h.end=function(){this.daoju1.touchEnabled=!1,this.daoju2.touchEnabled=!1,this.daoju3.touchEnabled=!1,this.daoju4.touchEnabled=!1,this.daoju5.touchEnabled=!1,this.daoju6.touchEnabled=!1,this.daoju1.hasEventListener(egret.TouchEvent.TOUCH_TAP)&&this.daoju1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onDaojuTouch,this),this.daoju2.hasEventListener(egret.TouchEvent.TOUCH_TAP)&&this.daoju2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onDaojuTouch,this),this.daoju3.hasEventListener(egret.TouchEvent.TOUCH_TAP)&&this.daoju3.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onDaojuTouch,this),this.daoju4.hasEventListener(egret.TouchEvent.TOUCH_TAP)&&this.daoju4.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onDaojuTouch,this),this.daoju5.hasEventListener(egret.TouchEvent.TOUCH_TAP)&&this.daoju5.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onDaojuTouch,this),this.daoju6.hasEventListener(egret.TouchEvent.TOUCH_TAP)&&this.daoju6.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onDaojuTouch,this)},h.getRandomNum=function(){var t=10*Math.random();return 3>=t?"1":6>=t?"2":9>=t?"3":"1"},e.TRIP_PEOPLE="TRIP_PEOPLE",e}(egret.Sprite);egret.registerClass(TripPeoplePanel,"TripPeoplePanel");var TripSelectPanel=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e),h=i.prototype;return h.start=function(){this.init(),this.xz_mojieSprite.touchEnabled=!0,this.xz_mojieSprite.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTab,this)},h.init=function(){if(!this.bg){var t=this.width,e=this.height;this.bg=new egret.Bitmap(RES.getRes("select_bg_png")),this.bg.width=t,this.bg.height=e,this.addChild(this.bg),this.selectAirplane=new egret.Bitmap(RES.getRes("select_airplane_png")),this.selectAirplane.x=t,this.selectAirplane.y=100,this.addChild(this.selectAirplane),egret.Tween.get(this.selectAirplane,{loop:!1}).to({x:.5*(t-this.selectAirplane.width)},3e3),this.xz_mojieSprite=new egret.Sprite,this.xz_mojieSprite.graphics.drawRect(0,0,.6*t,.6*e),this.xz_mojieSprite.graphics.endFill(),this.xz_mojieSprite.x=.5*(t-this.xz_mojieSprite.width)+.5*this.xz_mojieSprite.width,this.xz_mojieSprite.y=.6*(e-this.xz_mojieSprite.height)+.5*this.xz_mojieSprite.height,this.xz_mojieSprite.anchorOffsetX=.5*this.xz_mojieSprite.width,this.xz_mojieSprite.anchorOffsetY=.5*this.xz_mojieSprite.height,this.addChild(this.xz_mojieSprite),this.selectGo=new egret.Bitmap(RES.getRes("select_card_png")),this.selectGo.width=this.xz_mojieSprite.width,this.selectGo.height=this.xz_mojieSprite.height,this.xz_mojieSprite.addChild(this.selectGo),this.xz_mojiePic=new egret.Bitmap(RES.getRes("select_mojie_png")),this.xz_mojiePic.x=.5*(this.xz_mojieSprite.width-this.xz_mojiePic.width),this.xz_mojiePic.y=.5*(this.xz_mojieSprite.height-this.xz_mojiePic.height),this.xz_mojieSprite.addChild(this.xz_mojiePic)}},h.onTouchTab=function(t){this.loadingView=new LoadingUI,this.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("xz_mojieload")},h.end=function(){this.xz_mojieSprite.touchEnabled=!1,this.xz_mojieSprite.hasEventListener(egret.TouchEvent.TOUCH_TAP)&&this.xz_mojieSprite.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTab,this)},h.onResourceLoadComplete=function(t){"xz_mojieload"==t.groupName&&(this.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),ViewManager.getInstance().order(e.TRIP_SELECT,this))},h.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},h.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},h.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},e.TRIP_SELECT="TRIP_SELECT",e}(egret.Sprite);egret.registerClass(TripSelectPanel,"TripSelectPanel");var ViewManager=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e),h=i.prototype;return h.init=function(){this.tripIndexPanel=new TripIndexPanel,this.tripPeoplePanel=new TripPeoplePanel,this.tripSelectPanel=new TripSelectPanel,this.tripCardPanel=new TripCardPanel,this.tripIndexPanel.width=this.width,this.tripIndexPanel.height=this.height,this.tripPeoplePanel.width=this.width,this.tripPeoplePanel.height=this.height,this.tripSelectPanel.width=this.width,this.tripSelectPanel.height=this.height,this.tripCardPanel.width=this.width,this.tripCardPanel.height=this.height,this.addChild(this.tripIndexPanel),this.tripIndexPanel.start()},h.start=function(){this.init(),this.addEventListener(ChangeSceneEvent.CHANGE_SCENE_EVENT,this.onChangeScene,this)},h.order=function(t,e){var i=new ChangeSceneEvent(ChangeSceneEvent.CHANGE_SCENE_EVENT);i.eventType=t,i.obj=e,this.dispatchEvent(i)},e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},h.onChangeScene=function(t){switch(t.obj.end(),t.eventType){case TripIndexPanel.TRIP_INDEX:this.removeChildren(),this.tripSelectPanel.start(),this.addChild(this.tripSelectPanel);break;case TripSelectPanel.TRIP_SELECT:this.tripPeoplePanel.start(),this.addChild(this.tripPeoplePanel);break;case TripPeoplePanel.TRIP_PEOPLE:this.tripCardPanel.start(),this.addChild(this.tripCardPanel);break;case TripCardPanel.TRIP_CARD:this.removeChildren(),this.tripIndexPanel.start(),this.addChild(this.tripIndexPanel)}},e}(egret.Sprite);egret.registerClass(ViewManager,"ViewManager");